!function(t){t(document).ready(function(){function e(e){e.unbind().click(function(e){e.preventDefault(),a(t(this).attr("href"))})}function a(e){i(r),t.get(wvg_vars.ajax_url,{action:"wvg_get_admin_content",security:wvg_vars.security,post_id:wvg_vars.post_id},function(t){n(t)}).fail(function(t,e,a){alert(wvg_vars.il8n.generate_error.replace("%s",a))}).always(function(){r.unblock()})}function i(e){t(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function n(i){function n(){var t=o.find(".wvg_edit_variations");o.find(".js-toggle-editbox:checked").length>0?t.removeAttr("disabled"):t.attr("disabled","disabled")}var s=r.find(".wvg_inner");s.html(i);var o=s;o.find("#donotmanagestock").change(function(){"checked"==t(this).attr("checked")?(o.find("#qty").val("").attr("readonly",!0),o.find("#stockstatus").val("").attr("disabled",!0)):(o.find("#qty").removeAttr("readonly"),o.find("#stockstatus").removeAttr("disabled",!0))}),t(".js-wvg-process").click(function(e){if(t("#basePrice").val().length<1)return alert(wvg_vars.il8n.baseprice_error);var i=t(this);i.attr("disabled","disabled"),i.text(t(this).attr("data-active-text"));var n="fix"==t(this).data("action")?"wvg_fix_variations":"wvg_edit_variations";t.post(wvg_vars.ajax_url,{action:n,security:wvg_vars.security,data:o.find(":input").serialize()},function(t){"undefined"!=typeof t.success&&0!=t.success||alert(wvg_vars.il8n.generate_error),alert(wvg_vars.il8n.generate_success.replace("%s",t.data.time)),a("#wvg_variations_generator")}).fail(function(t,e,a){alert(wvg_vars.il8n.generate_error.replace("%s",a))}).always(function(){i.removeAttr("disabled")})}),t(".js-select-attributes").change(function(){t(".edit-variations-count .count").text("..."),t.getJSON(wvg_vars.ajax_url,{action:"wvg_get_variations_count",security:wvg_vars.security,post_id:wvg_vars.post_id,attributes:t(".js-select-attributes").serialize()},function(e){"undefined"!=typeof e.success&&1==e.success&&"undefined"!=typeof e.data.count&&(t(".edit-variations-count .count").text(e.data.count),t(".wvg_edit_variations").val(t(".wvg_edit_variations").data("text").replace("%d",e.data.count)))})}),o.find(".js-delete-rule").click(function(e){e.preventDefault(),window.confirm(wvg_vars.il8n.confirm_delete_rule)&&t.post(wvg_vars.ajax_url,{action:"wvg_delete_price_rule",security:wvg_vars.security,post_id:wvg_vars.post_id,rule_attributes:t(this).data("rule")},function(t){"undefined"!=typeof t.success&&0!=t.success||alert(wvg_vars.il8n.generate_error),a("#wvg_variations_generator")}).fail(function(t,e,a){alert(wvg_vars.il8n.generate_error.replace("%s",a))}).always(function(){})}),n(),o.find('input[type="checkbox"].js-toggle-editbox').each(function(){t(this).change(function(){o.find(".col-inner.col-"+t(this).attr("id")).slideToggle("fast"),n()})}),o.find("select#manage_stock").change(function(){1==parseInt(t(this).val())&&t(".variation_manage_stock").slideDown("fast"),0==parseInt(t(this).val())&&t(".variation_manage_stock").slideUp("fast")}),o.find(".woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:50}),e(t("#woocommerce-product-data .js-wvg-load-inner-tab a")),r.unblock()}var r=t("#wvg_variations_generator");e(t("#woocommerce-product-data .js-wvg-load-tab a"))})}(jQuery);